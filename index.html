<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <title>3 Pulley Modified ATD</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2563eb">
  <link rel="icon" href="app-icon.png">
  <link rel="apple-touch-icon" href="app-icon.png">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- Styles -->
  <style>
    body {
      -webkit-user-select: none;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }

    input {
      -webkit-user-select: text;
      user-select: text;
    }

    #splash {
      position: fixed;
      inset: 0;
      background: #121212;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    #splash img {
      width: 120px;
      height: 120px;
      margin-bottom: 15px;
    }

    #splash h1 {
      color: #fff;
      font-size: 24px;
    }
  </style>
</head>

<body>

  <!-- Splash Screen -->
  <div id="splash">
    <img src="logo.png" alt="ATD Calc">
    <h1>ATD Calc</h1>
  </div>

  <!-- Header -->
  <div class="text-center mt-6">
    <h1 class="text-xl font-bold">ATD DIMENSION CALCULATOR</h1>
    <p class="text-sm text-slate-600">
      Developed by <b>Abhishek Pandey</b>
    </p>
  </div>

  <!-- Main -->
  <main class="p-4 max-w-md mx-auto space-y-4">

    <div class="bg-white rounded-full shadow text-center py-3 font-semibold">
      3-Pulley Modified ATD
    </div>

    <div>
      <label class="text-sm font-medium">Half Tension Length (m)</label>
      <input id="length" type="number" placeholder="e.g. 750"
        class="w-full p-3 rounded-xl border mt-1">
    </div>

    <div>
      <label class="text-sm font-medium">Temperature (°C)</label>
      <input id="temperature" type="number" placeholder="e.g. 35"
        class="w-full p-3 rounded-xl border mt-1">
    </div>

    <button onclick="calculate()"
      class="w-full bg-blue-600 text-white py-4 rounded-xl font-bold">
      Calculate Dimensions
    </button>

    <!-- Results -->
    <div id="results" class="hidden bg-white rounded-xl p-4 shadow">
      <p><b>X:</b> <span id="resX_mm"></span> mm</p>
      <p><b>Y:</b> <span id="resY_mm"></span> mm</p>
    </div>

  </main>

  <!-- Footer -->
  <footer class="text-center text-xs text-slate-500 mt-6">
    <p>Formula: 1300/2300 + (L × 1.7e-5 × ΔT)</p>
    <p class="font-bold mt-2">EASTERN RAILWAY – TRD / BASIRHAT</p>
  </footer>

  <!-- Scripts -->
  <script>
    // Splash hide
    window.onload = () => {
      setTimeout(() => {
        document.getElementById("splash").style.display = "none";
      }, 2000);
    };

    // Calculation
    function round(val, digits) {
  return Math.round((val + Number.EPSILON) * 10 ** digits) / 10 ** digits;
}

function calculate() {
  const L = parseFloat(document.getElementById("length").value);
  const T = parseFloat(document.getElementById("temperature").value);

  if (isNaN(L) || isNaN(T)) {
    alert("Please enter valid numbers");
    return;
  }

  const T0 = 35;
  const alpha = 1.7e-5;

  const deltaL = L * alpha * (T - T0) * 1000;

  const X = 1300 + deltaL;
  const Y = 2300 + 3 * deltaL;

  document.getElementById("resX_mm").textContent = round(X, 2);
  document.getElementById("resX_m").textContent = round(X / 1000, 4);

  document.getElementById("resY_mm").textContent = round(Y, 2);
  document.getElementById("resY_m").textContent = round(Y / 1000, 4);

  document.getElementById("results").classList.remove("hidden");
}

    // Icons
    lucide.createIcons();

    // Service Worker
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js");
    }
  </script>

</body>
</html>
